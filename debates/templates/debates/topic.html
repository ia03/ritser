{% extends "base.html" %}
{% load markdown humanize static %}

{% block title %}{% if topic.title != "" %}{{ topic.title }}{% else %}t/{{ topic.name }}{% endif %} - MoDebate{% endblock %}

{% block head %}<link rel="stylesheet" href="{% static "debates/css/topic.css" %}">
<link rel="stylesheet" href="{% static "debates/css/debateslist.css" %}">{% endblock %}

{% block body %}
    <main role="main" class="container">
      <h1 class="mt-5">{{ctopicn}}</h1>
      <p class="lead">{{topic.title}}</p>
      <a href="{% url 'topicinfo' tname=topic.name %}">Details Page</a> - <a href="{% url 'edittopic' tname=topic.name %}">Edit/View source</a> - <a href="{% url 'topicedits' tname=topic.name %}">Edits</a>
      <div class="row">
        <div class="col-md-6">Owner:
          <a href="{{topic.owner.get_absolute_url}}">
            {{topic.owner.get_username}}
          </a><br> Security Level: {{topic.slvl}}
          <br>
          Default Debate Security Level: {{topic.debslvl}}
          <br>
          Created on {{topic.created_on|date}}
          <br>
          Sorting method:
          <select onchange="changesort()" id="sorts">
            <option value="top">Top</option>
            <option value="lowest">Lowest</option>
            <option value="new">New</option>
            <option value="random">Random</option>
          </select>
        </div>
        <div class="col-md-6 text-md-right" id="modcol">
          Moderators: {% for mod in fmods|slice:":10" %}{% if not forloop.first %}, {% endif %}<a href="{{mod.get_absolute_url}}">{{mod.get_username}}</a>{% endfor %}{% if mods|length > 10 %}...{% endif %}
          <a class="btn btn-primary{% if not ats %} disabled{% endif %}" id="submitdbtn" href="{% if ats %}{% url 'submitdebate' %}?topic={{topic.name}}{% else %}#{% endif %}">Submit Debate</a>
        </div>
      </div>
      <hr />
       <br>
      {% include 'snippets/debateslist.html' %}
      {% if debates.has_other_pages %}
      {% load paginator %}
      {% load link_name %}
      {% paginator debates request %}
      {% endif %}
    </main>

{% endblock %}

{% block endjs %}
<script src="https://cdn.jsdelivr.net/npm/js-cookie@2.2.0/src/js.cookie.min.js"></script>
<script src="{% static "debates/js/topic.js" %}"></script>
<script src="{% static "debates/js/debatevote.js" %}"></script>{% endblock %}
